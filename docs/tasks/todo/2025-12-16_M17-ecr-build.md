---
id: "2025-12-16_M17-ecr-build"
title: "M17 Build & push images to ECR"
type: feature
area: devops
agents_required: [devops]
depends_on: ["2025-12-16_M15-terraform-bootstrap"]
validated_by:
validated_at:
---

# Ticket: M17 Build & push images to ECR

## But
Préparer le pipeline pour construire et pousser les images Docker de l’API (et éventuellement du web) vers ECR.

## Scope
- Workflow CI/CD (GitHub Actions)
- Authentification ECR (login)
- Makefile ou script de build/push

## Contraintes
- Pas de secret AWS en clair ; utiliser credentials OIDC/assume role ou variables chiffrées
- Taggage clair (sha, branch, latest si pertinent)
- Reproductibilité locale et en CI

## Deliverables
- Workflow ou cible Makefile pour build/push ECR
- Documentation des prérequis (AWS auth)
- Exemple de tags

## Critères d’acceptation
- [ ] Un job CI peut builder et pousser une image vers un repo ECR configuré
- [ ] Le login ECR est sans secret en clair (OIDC/assume role ou secret GitHub)
- [ ] Les tags incluent au moins le SHA

## Plan proposé
1) Ajouter la logique de login ECR (OIDC/role) et les variables nécessaires
2) Implémenter le build/push (Makefile ou workflow)
3) Documenter l’usage et les tags
